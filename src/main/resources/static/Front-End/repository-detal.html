<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>
        资源共享平台
    </title>
    <link rel="shortcut icon" href="http://oqlse9rck.bkt.clouddn.com/favicon.ico">
    <link href="css/TothingWay.css" rel="stylesheet" />
    <link href="css/repository.css" rel="stylesheet" />
</head>
<style>
    .column-content li:hover {
        font-weight: bold;
    }
</style>

<body>
    <!--导航-->
    <nav class="navbar navbar-default nav-scroll navbar-fixed-top">
        <div class="container">
            <!--导航左半部分-->
            <div class="navbar-header">
                <!--手机模式导航按钮-->
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">
                        IT.Share
                    </span>
                    <span class="icon-bar">
                    </span>
                    <span class="icon-bar">
                    </span>
                    <span class="icon-bar">
                    </span>
                </button>
                <!--logo-->
                <a class="navbar-brand" href="index.html"></a>
            </div>
            <!--导航右半部分-->
            <div id="navbar" class="navbar-collapse collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="index.html">
                            首页
                        </a>
                    </li>
                    <li>
                        <a href="resource-index.html">
                            资料中心
                        </a>
                    </li>
                    <li>
                        <a href="forum-index.html">
                            交流分享
                        </a>
                    </li>
                    <li class="active">
                        <a href="repository-index.html">
                            知识百科
                        </a>
                    </li>
                    <li>
                        <a href="quiz-index.html">
                            在线问答
                        </a>
                    </li>
                    <li>
                        <a href="about.html" target="_blank">
                            关于我们
                        </a>
                    </li>
                    <!--登录成功后显示的个人信息下拉菜单-->
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                            张三
                            <span class="caret">
                            </span>
                        </a>
                        <ul class="dropdown-menu">
                            <li class="dropdown-header">
                                未读消息
                                <span class="badge">
                                    61
                                </span>
                            </li>
                            <li>
                                <a href="#">
                                    未读消息1
                                    <span class="badge">
                                        2
                                    </span>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    未读消息2
                                    <span class="badge">
                                        42
                                    </span>
                                </a>
                            </li>
                            <li role="separator" class="divider">
                            </li>
                            <li>
                                <a href="#">
                                    注销
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
            <!-- /.nav-collapse -->
        </div>
    </nav>

    <!--banner-->
    <div class="banner">
        <div class="banner-img">
            <div class="icon-container">
                <!--只是图标-->
                <div class="icon">
                    <img src="../images/" class="img-circle">
                </div>
                <div class="txt">Angular.js</div>
            </div>
        </div>
    </div>

    <!--资源详情-->
    <div class="container detal-container">


        <!--知识目录-->
        <div class="row detal-main" id="app">
            <div class="col-xs-12 col-sm-3">
                <div class="recommendation">
                    <h3><span class="glyphicon glyphicon-bookmark"></span> 知识目录</h3>
                    <div class="column-content" id='apps1'>
                        <ul>
                            <li v-for='item in other'>
                                <a href="javascript:;" onclick="hf(this)"> • {{item.title}}</a>
                                <span hidden='hidden' v-text='item.tid'></span>
                            </li>

                        </ul>
                    </div>
                </div>
            </div>
            <!--右边知识详情-->
            <div class="col-xs-12 col-sm-9">
                <div class="recommendation padding" id="app">
                    <h4 v-text="title">养生知识</h4>
                    <p class="gray" v-html="content">养生之道...</p>
                </div>
                <!--/.recommendation-->
            </div>
        </div>
    </div>

    <div class="footer">
        养生之道——养生知识
    </div>

    <script src="js/TothingWay.js">
    </script>
    <script src="js/repository.js">
    </script>
    <script src="js/jquery-3.4.1.min.js"></script>
    <script src="js/vue.js"></script>
    <script>
        var vm = new Vue({
            el: '#app',
            data: {
                title: '',
                content: '',
                other: [],
            },
            methods: {

            }
        })


        var query = window.location.search.substring(1);
        console.log(query);
        var pair = query.split("=");

        $(function() {
            $.ajax({
                type: 'get',
                url: 'http://localhost:8080/arts/' + pair[1],
                dataType: 'json',
                success: function(data) {
                    $.ajax({
                        url: data.txtsrc,
                        dataType: "text",
                        type: "post",
                        success: function(data) {
                            data = data.replace(/\n/g, "<br>");
                            vm.title = data.substring(0, data.indexOf("<br>"));
                            vm.content = data.substring(data.indexOf("<br>"));
                        }
                    });

                }
            })


            $.ajax({
                type: 'get',
                url: 'http://localhost:8080/allarts',
                dataType: 'json',
                success: function(data) {
                    vm.other = data;

                }
            })


        })

        function hf(obj) {
            var obj = obj.nextElementSibling;
            window.location.href = ("repository-detal.html?id=" + obj.innerText);
        }
    </script>
</body>

</html>